% Package for setup of chapters and sections
\usepackage{titlesec}


\makeatletter
    \let\stdchapter\chapter
    \renewcommand*\chapter
    {
        \@ifstar{\starchapter}{\@dblarg\nostarchapter}
    }
    \newcommand*\starchapter[1]
    {
        \stdchapter*{#1}
        \thispagestyle{fancy}
        \markboth{\MakeUppercase{#1}}{}
    }
    \def\nostarchapter[#1]#2
    {
        \stdchapter[{#1}]{#2}
        \thispagestyle{fancy}
    }
\makeatother




% % % % % % % % % % % % % % CHAPTER  % % % % % % % % % % % % % % % % % % % % % %
% Define fontsize for the numbering of the chapters
\newcommand{\ChapterNumbering}{
    \usefont{\encodingdefault}{\rmdefault}{b}{n}
    \fontsize{35}{45}\normalfont\color{ThemeColor}}

% Chapter numbers in margin
\chapterstyle{hangnum}

% Modifying "\chapterstyle{hangnum}"
% Changing vertical position of chapter headline
\renewcommand*{\chapterheadstart}{\vspace*{-20pt}}

% Color setup for chapters
% Title color
\renewcommand*{\chaptitlefont}{\bfseries\Huge\color{BlackColor}}
% Number color
\renewcommand{\chapnumfont}{\normalfont\ChapterNumbering\color{ThemeColor}}




% % % % % % % % % % % % % % SECTION  % % % % % % % % % % % % % % % % % % % % % %
% Section numbers in margin
\hangsecnum

% Color setup for sections
% Title color
\renewcommand\thesection{\color{ThemeColor}\thechapter.\arabic{section}}

% Set numbering depth of sections
\setsecnumdepth{subsection}

% Set the depth of sections included in table of contents
\settocdepth{subsection}

% Keeps floats in the subsection.
\usepackage{placeins}
\makeatletter
\AtBeginDocument{%
	\expandafter\renewcommand\expandafter\subsection\expandafter
	{\expandafter\@fb@secFB\subsection}%
	\newcommand\@fb@secFB{\FloatBarrier
		\gdef\@fb@afterHHook{\@fb@topbarrier \gdef\@fb@afterHHook{}}}%
	\g@addto@macro\@afterheading{\@fb@afterHHook}%
	\gdef\@fb@afterHHook{}%
}
\makeatother
    
    

